const lang = {
    en: {
        "BlockFriends": "Blocked Friends",
        "PingPong": "Ping Pong",
        "Profile": "Profile",
        "Log Out": "Log Out",
        "Setting": "Setting",
        "Game": "Game",
        "Hi, My Name is Khadija Hammadi": "Hi, My Name is Khadija Hammadi",
        "Match History": "Match History",
        "My friends": "My friends",
        "Home": "Home",
        "Statistics":"Statistics",
        "Find Friends":"Find Friends",
        "Add Friends":"Add Friends",
        "Discover Our Games":"Discover Our Games",
        "Meet the Creators":"Meet the Creators",
        "Khadija is responsible for designing the user interface and ensuring a seamless player experience.":"Khadija is responsible for designing the user interface and ensuring a seamless player experience.",
        "Anas creates the game mechanics, levels, and overall gameplay experience.":"Anas creates the game mechanics, levels, and overall gameplay experience.",
        "Hamza handles the server-side logic and ensures the game runs smoothly.":"Hamza handles the server-side logic and ensures the game runs smoothly.",
        "Frontend Developer":"Frontend Developer",
        "Game Designer":"Game Designer",
        "Backend Developer":"Backend Developer",
        "PingPong Sky":"PingPong Sky",
        "Update Information":"Update Information",
        "Save":"Save",
        "Hamza Naama":"Hamza Naama",
        "Play 1 vs 1":"Play 1 vs 1",
        "Start a Tournament":"Start a Tournament",
        "Play vs AI":"Play vs AI",
        "Play against Multiple players":"Play against Multiple players",
        "Start the Game":"Start the Game",
        "Requests":"Requests",
        "Change Password":"Change Password",
        "Enter Player 1 Name":"Enter Player 1 Name"
    },
    ar: {
        "BlockFriends": "الأصدقاء المحظورون",
        "PingPong": "لعبة الطاولة",
        "Profile": "الملف الشخصي",
        "Log Out": "تسجيل الخروج",
        "Setting": "الإعدادات",
        "Game": "لعبة",
        "Hi, My Name is Khadija Hammadi": "مرحبًا، اسمي خديجة حمادي",
        "Match History": "تاريخ المباريات",
        "My friends": "أصدقائي",
        "Home": "الصفحة الرئيسية",
        "Statistics":"الإحصائيات",
        "Find Friends":"ابحث عن أصدقاء",
        "Add Friends":"إضافة أصدقاء",
        "Discover Our Games":"اكتشف ألعابنا",
        "Meet the Creators":"التقي بالمبدعين",
        "Khadija is responsible for designing the user interface and ensuring a seamless player experience.":"خديجة مسؤولة عن تصميم واجهة المستخدم وضمان تجربة سلسة للمستخدم.",
        "Anas creates the game mechanics, levels, and overall gameplay experience.":" أنس يقوم بإنشاء آليات اللعبة، المستويات، وتجربة اللعب بشكل عام",
        "Hamza handles the server-side logic and ensures the game runs smoothly.":"حمزة يتولى منطق الخادم ويضمن تشغيل اللعبة بسلاسة",
        "Frontend Developer":"مطوّرة الواجهة الأمامية",
        "Game Designer":"مصمم ألعاب",
        "Backend Developer":" مطوّر الواجهة الخلفية",
        "Khadija Hammadi":"خديجة حمادي",
        "Anas Bounit":"أنس بونيت",
        "Hamza Naama":"حمزة الناعمى",
        "PingPong Sky":"بينغ بونغ سكاي",
        "StarWars sky":"ستار وورز سكاي",
        "Update Information":"تحديث المعلومات",
        "Save":"حفظ",
        "Play 1 vs 1":"العب 1 ضد 1",
        "Start a Tournament":"ابدأ بطولة",
        "Play vs AI":" العب ضد الذكاء الاصطناعي",
        "Play against Multiple players":"العب ضد عدة لاعبين",
         "Start the Game":"ابدأ اللعبة",
        "Requests":"طلبات",
        "Change Password":"تعديل المرور",
        "Enter Player 1 Name":"Enter Player 1 Name"
    },
    fr: {
        "BlockFriends": "Amis bloqués",
        "Profile": "Profil",
        "PingPong": "Ping Pong",
        "Log Out": "Déconnexion",
        "Setting": "Paramètres",
        "Game": "Jeu",
        "Hi, My Name is Khadija Hammadi": "Salut, je m'appelle Khadija Hammadi",
        "Match History": "Historique des matchs",
        "My friends": "Mes amis",
        "Home": "Page d'accueil",
        "Statistics":"Statistiques",
        "Find Friends":"Trouver des amis",
        "Add Friends":"Ajouter des amis",
        "Discover Our Games":"Découvrez nos jeux",
        "Meet the Creators":"Rencontrez les créateurs",
        "Khadija is responsible for designing the user interface and ensuring a seamless player experience.":"Khadija est responsable de la conception de l'interface utilisateur et de l'assurance d'une expérience fluide pour le joueur",
        "Anas creates the game mechanics, levels, and overall gameplay experience.":"Anas crée les mécaniques de jeu, les niveaux et l'expérience de gameplay globale",
        "Hamza handles the server-side logic and ensures the game runs smoothly.":"Hamza gère la logique côté serveur et s'assure que le jeu fonctionne sans problème",
        "Frontend Developer":"Développeur Frontend",
        "Game Designer":"Concepteur de jeux",
        "Backend Developer":"Développeur Backend",
        "Update Information":"Mettre à jour les informations",
        "Save":"Enregistrer",
        "Hamza Naama":"Hamza Naama",
        "Play 1 vs 1":"Jouer 1 contre 1",
        "Start a Tournament":"Commencer un tournoi",
        "Play vs AI":"Jouer contre l'IA",
        "Play against Multiple players":"Jouer contre plusieurs joueurs",
         "Start the Game":"Démarrer le jeu",
        "Requests":"Demandes",
        "Change Password":"Changer le mdp",
        "Enter Player 1 Name":"Enter Player 1 Name"
    },
    de: {
        "Profile": "Profil",
        "BlockFriends": "Blockierte Freunde",
        "PingPong": "Ping Pong",
        "Log Out": "Abmelden",
        "Setting": "Einstellungen",
        "Game": "Spiel",
        "Hi, My Name is Khadija Hammadi": "Hallo, mein Name ist Khadija Hammadi",
        "Match History": "Spielverlauf",
        "My friends": "Meine Freunde",
        "Home": "Startseite",
        "Statistics":"Statistik",
        "Find Friends":"Freunde finden",
        "Add Friends":"Freunde hinzufügen",
        "Discover Our Games":"Entdecke unsere Spiele",
        "Meet the Creators":"Triff die Schöpfer",
        "Khadija is responsible for designing the user interface and ensuring a seamless player experience.":"Khadija ist verantwortlich für das Design der Benutzeroberfläche und sorgt für ein nahtloses Spielerlebnis",
        "Anas creates the game mechanics, levels, and overall gameplay experience.":"Anas erstellt die Spielmechaniken, Levels und das gesamte Spielerlebnis.",
        "Hamza handles the server-side logic and ensures the game runs smoothly.":"Hamza kümmert sich um die serverseitige Logik und sorgt dafür, dass das Spiel reibungslos läuft.",
        "Frontend Developer":"Frontend-Entwickler",
        "Game Designer":"Spieledesigner",
        "Backend Developer":"Backend-Entwickler",
        "Update Information":"Informationen aktualisieren",
        "Save":"Speichern",
        "Hamza Naama":"Hamza Naama",
        "Play 1 vs 1":"1 gegen 1 spielen",
        "Start a Tournament":"Ein Turnier starten",
        "Play vs AI":"Gegen die KI spielen",
        "Play against Multiple players":"Gegen mehrere Spieler spielen",
        "Start the Game":"Das Spiel starten",
        "Requests":"Anfragen",
        "Change Password":"Passwort ändern"
    }
};

export async function changeLanguage() {
    try {
        const response = await fetch('http://localhost:8000/api/users/user/language/', {
            method: 'GET',
            credentials: 'include',
        });
        if (!response.ok) {
            throw new Error('Failed to fetch language preference');
        }
        const data = await response.json();
        const language = data.language || 'en';
        const elements = document.querySelectorAll("[data-i18n]");
        elements.forEach(element => {
            const key = element.getAttribute("data-i18n");
            if (lang[language] && lang[language][key]) {
                element.textContent = lang[language][key];
            }
        });
        const myLinks = document.querySelectorAll("my-link");
        myLinks.forEach(myLink => {
            const clonedLink = myLink.cloneNode(true);
            myLink.replaceWith(clonedLink);
        });
    } catch (error) {
        console.error('Error fetching language preference:', error);
        const language = 'en';
        const elements = document.querySelectorAll("[data-i18n]");
        elements.forEach(element => {
            const key = element.getAttribute("data-i18n");
            if (lang[language] && lang[language][key]) {
                element.textContent = lang[language][key];
            }
        });
    }
}